<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;stxxl&gt;: Example Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>algo/test_scan.cpp</h1>This is an example of how to use <code><a class="el" href="group__stlalgo.html#a10">stxxl::for_each()</a></code> and <code><a class="el" href="group__stlalgo.html#a11">stxxl::find()</a></code> algorithms <div class="fragment"><pre><span class="preprocessor">#include "../containers/vector"</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;algorithm&gt;</span>
<span class="preprocessor">#include "scan.h"</span>


<span class="keyword">using</span> <span class="keyword">namespace </span>stxxl;

<span class="keyword">template</span> &lt;<span class="keyword">typename</span> type&gt;
<span class="keyword">struct </span>counter
{
        type value;
        counter(type v = type(0)):value(v) {}
        type operator() ()
        {
                type old_val = value;
                value++;
                <span class="keywordflow">return</span> old_val;
        }
};

<span class="keyword">template</span> &lt;<span class="keyword">typename</span> type&gt;
<span class="keyword">struct </span>square
{
        <span class="keywordtype">void</span> operator()(type &amp; arg)
        {
                arg = arg * arg ;
        }
};


<span class="keywordtype">int</span> main()
{
        int64 i;
        <a name="_a7"></a><a class="code" href="classstxxl_1_1vector.html">stxxl::vector&lt;int64&gt;</a> v(64*int64(1024*1024));
        <span class="comment">//stxxl::vector&lt;int64&gt;::iterator it = v.begin();</span>
        <span class="comment">//stxxl::vector&lt;int64&gt;::const_iterator c_it = v.begin();</span>
        
        
        <span class="comment">//stxxl::random_number&lt;&gt; rnd;</span>
        
        STXXL_MSG(<span class="stringliteral">"write "</span>&lt;&lt;(v.<a name="a8"></a><a class="code" href="classstxxl_1_1vector.html#a13">end</a>() - v.<a name="a9"></a><a class="code" href="classstxxl_1_1vector.html#a11">begin</a>()))
        
        std::generate(v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>(),v.<a class="code" href="classstxxl_1_1vector.html#a13">end</a>(),counter&lt;int64&gt;());      
        
        STXXL_MSG(<span class="stringliteral">"for_each ..."</span>)
        <span class="keywordtype">double</span> b = stxxl_timestamp();
        <a name="a10"></a><a class="code" href="group__stlalgo.html#a10">stxxl::for_each</a>(v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>(),v.<a class="code" href="classstxxl_1_1vector.html#a13">end</a>(),square&lt;int64&gt;(),4);
        <span class="keywordtype">double</span> e = stxxl_timestamp();
        STXXL_MSG(<span class="stringliteral">"for_each time: "</span>&lt;&lt;(e-b))
        
        STXXL_MSG(<span class="stringliteral">"check"</span>)
        <span class="keywordflow">for</span>(i=0;i&lt;v.<a name="a11"></a><a class="code" href="classstxxl_1_1vector.html#a10">size</a>();i++)
        {
                <span class="keywordflow">if</span>(v[i] != i*i ) STXXL_MSG(<span class="stringliteral">"Error at position "</span>&lt;&lt;i)
        }

        STXXL_MSG(<span class="stringliteral">"Pos of value    1023: "</span>&lt;&lt; (stxxl::find(v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>(),v.<a class="code" href="classstxxl_1_1vector.html#a13">end</a>(),1023,4) - v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>()))
        STXXL_MSG(<span class="stringliteral">"Pos of value 1048576: "</span>&lt;&lt; (stxxl::find(v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>(),v.<a class="code" href="classstxxl_1_1vector.html#a13">end</a>(),1024*1024,4) - v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>()))
        STXXL_MSG(<span class="stringliteral">"Pos of value    1024: "</span>&lt;&lt; (stxxl::find(v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>(),v.<a class="code" href="classstxxl_1_1vector.html#a13">end</a>(),32*32,4) - v.<a class="code" href="classstxxl_1_1vector.html#a11">begin</a>()))
        
        <span class="keywordflow">return</span> 0;
};
</pre></div> <hr size="1"><address style="align: right;"><small>Generated on Fri Nov 21 15:28:10 2003 for <stxxl> by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
